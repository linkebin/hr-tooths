2019-2-26 10:42:43 main INFO The following profiles are active: dev
2019-2-26 10:43:03 main DEBUG ==>  Preparing: SELECT * FROM sec_menu sm where deleted=0 AND sm.STANBY_ID1 = '2' ORDER BY SORT 
2019-2-26 10:43:04 main DEBUG ==> Parameters: 
2019-2-26 10:43:04 main DEBUG <==      Total: 48
2019-2-26 10:43:16 localhost-startStop-1 INFO JedisPool注入成功！！
2019-2-26 10:43:16 localhost-startStop-1 INFO redis地址：localhost:6379
2019-2-26 10:44:26 main INFO Started BaseFrameApplication in 118.563 seconds (JVM running for 123.219)
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG ==>  Preparing: SELECT * FROM sec_user WHERE DELETED=0 AND ACCOUNT = ? 
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG ==> Parameters: admin(String)
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT * FROM sec_user WHERE DELETED=0 AND ACCOUNT = ? 
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG ==> Parameters: admin(String)
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT sec_menu.URL FROM sec_menu WHERE DELETED = 0 AND MENU_TYPE = 2 AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID WHERE u.ID_ = ? ) 
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG ==>  Preparing: SELECT sec_menu.URL FROM sec_menu WHERE DELETED = 0 AND MENU_TYPE = 2 AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID WHERE u.ID_ = ? ) 
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG <==      Total: 20
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG <==      Total: 20
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG ==>  Preparing: INSERT INTO login_log ( log_id,user_id,user_name,account_type,login_type,login_ip,login_time,user_account,success ) VALUES( ?,?,?,?,?,?,?,?,? ) 
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG ==>  Preparing: INSERT INTO login_log ( log_id,user_id,user_name,account_type,login_type,login_ip,login_time,user_account,success ) VALUES( ?,?,?,?,?,?,?,?,? ) 
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG ==> Parameters: 987c9bef-37e0-4fd1-bac2-1b4c1406ba60(String), 1(String), admin(String), 管理员(String), 管理端(String), 0:0:0:0:0:0:0:1(String), 2019-02-26 10:45:53.275(Timestamp), admin(String), 是(String)
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG ==> Parameters: 70259e02-ba5e-4f9d-b39e-f8bbec7ef5a7(String), 1(String), admin(String), 管理员(String), 管理端(String), 0:0:0:0:0:0:0:1(String), 2019-02-26 10:45:53.143(Timestamp), admin(String), 是(String)
2019-2-26 10:45:53 http-nio-8081-exec-10 DEBUG <==    Updates: 1
2019-2-26 10:45:53 http-nio-8081-exec-9 DEBUG <==    Updates: 1
2019-2-26 10:45:54 http-nio-8081-exec-8 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-26 10:45:54 http-nio-8081-exec-8 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 10:45:54 http-nio-8081-exec-8 DEBUG <==      Total: 26
2019-2-26 10:45:54 http-nio-8081-exec-7 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 10:45:54 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 10:45:54 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 10:45:54 http-nio-8081-exec-6 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 10:45:54 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 10:45:54 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 10:45:54 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 10:45:54 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 10:45:54 http-nio-8081-exec-5 DEBUG <==      Total: 2
2019-2-26 10:45:55 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 10:45:55 http-nio-8081-exec-5 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 10:45:55 http-nio-8081-exec-5 DEBUG <==      Total: 2
2019-2-26 10:45:55 http-nio-8081-exec-6 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 10:45:55 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 10:45:55 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 10:45:55 http-nio-8081-exec-4 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 10:45:55 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 10:45:55 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 10:45:58 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 10:45:58 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 10:45:58 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 10:45:58 http-nio-8081-exec-2 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 10:45:58 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 10:45:58 http-nio-8081-exec-2 DEBUG <==      Total: 8
2019-2-26 10:45:59 http-nio-8081-exec-1 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 10:45:59 http-nio-8081-exec-1 DEBUG ==> Parameters: 122(String)
2019-2-26 10:45:59 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 10:46:01 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator,b.num,b.money,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator,a.num,a.money,a.state from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 10:46:01 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:01 http-nio-8081-exec-10 DEBUG <==      Total: 9
2019-2-26 10:46:01 http-nio-8081-exec-10 DEBUG ==>  Preparing: select count(*) from( select a.in_out_code from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 10:46:01 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:01 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 10:46:01 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT f_getCode(?) as code 
2019-2-26 10:46:01 http-nio-8081-exec-9 DEBUG ==> Parameters: RK(String)
2019-2-26 10:46:01 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 10:46:02 http-nio-8081-exec-8 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 10:46:02 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 10:46:02 http-nio-8081-exec-8 DEBUG <==      Total: 8
2019-2-26 10:46:02 http-nio-8081-exec-7 DEBUG ==>  Preparing: select sum(inventory_num) numSum, sum(money) moneySum from items_temporary where order_id = ? 
2019-2-26 10:46:02 http-nio-8081-exec-7 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:02 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 10:46:02 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 ) t LIMIT 10 OFFSET 0 
2019-2-26 10:46:02 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 10:46:02 http-nio-8081-exec-6 DEBUG <==      Total: 10
2019-2-26 10:46:02 http-nio-8081-exec-6 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 
2019-2-26 10:46:02 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 10:46:02 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 10:46:02 http-nio-8081-exec-5 DEBUG ==>  Preparing: select * from ( select * from items_temporary where order_id = ? ) t LIMIT 10 OFFSET 0 
2019-2-26 10:46:02 http-nio-8081-exec-5 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:02 http-nio-8081-exec-5 DEBUG <==      Total: 0
2019-2-26 10:46:02 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from items_temporary where order_id = ? 
2019-2-26 10:46:02 http-nio-8081-exec-5 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:02 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG ==>  Preparing: select * from stock_product where product_code = ? 
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG ==> Parameters: M003772(String)
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG ==>  Preparing: select * from items_temporary where order_id='RK000009' and code = 'M003772' limit 1 
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG <==      Total: 0
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG ==>  Preparing: INSERT INTO items_temporary ( ID,batch,code,name,type_id,type,model,specifications,brand,inventory_num,inventory_cost,validity,retail_price,money,remark,order_id,unit ) VALUES( ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,? ) 
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG ==> Parameters: 2f13aaba-efba-4b3d-8ea9-260085874607(String), RK000009(String), M003772(String), FF莱素芳洗手液架子(String), CD000278(String), 其它(String), (String), 个(String), (String), 12(Integer), 10.0(Double), 2020-08-27 00:00:00.0(Timestamp), 0.0(Double), 120.0(Double),  (String), RK000009(String), 个(String)
2019-2-26 10:46:06 http-nio-8081-exec-4 DEBUG <==    Updates: 1
2019-2-26 10:46:06 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 ) t LIMIT 10 OFFSET 0 
2019-2-26 10:46:06 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 10:46:06 http-nio-8081-exec-3 DEBUG <==      Total: 10
2019-2-26 10:46:06 http-nio-8081-exec-3 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 
2019-2-26 10:46:06 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 10:46:06 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 10:46:06 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from ( select * from items_temporary where order_id = ? ) t LIMIT 10 OFFSET 0 
2019-2-26 10:46:06 http-nio-8081-exec-2 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:06 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 10:46:06 http-nio-8081-exec-2 DEBUG ==>  Preparing: select count(*) from items_temporary where order_id = ? 
2019-2-26 10:46:06 http-nio-8081-exec-2 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:06 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 10:46:06 http-nio-8081-exec-1 DEBUG ==>  Preparing: select sum(inventory_num) numSum, sum(money) moneySum from items_temporary where order_id = ? 
2019-2-26 10:46:06 http-nio-8081-exec-1 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:06 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 10:46:07 http-nio-8081-exec-10 DEBUG ==>  Preparing: select sum(inventory_num) numSum, sum(money) moneySum from items_temporary where order_id = ? 
2019-2-26 10:46:07 http-nio-8081-exec-10 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:07 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 10:46:07 http-nio-8081-exec-10 DEBUG ==>  Preparing: INSERT INTO stock_in_out ( in_out_id,in_out_code,in_out_time,creator_id,creator,money,num,in_obj,out_obj,type,state,clinic_id ) VALUES( ?,?,?,?,?,?,?,?,?,?,?,? ) 
2019-2-26 10:46:07 http-nio-8081-exec-10 DEBUG ==> Parameters: 481a38d5-4709-4333-aa5a-030938c0df27(String), RK000009(String), 2019-02-26 10:46:07.067(Timestamp), 1(String), admin(String), 120.0(Double), 12(Integer), 总部(String), 服务商(String), 进货(String), 0.0(Double), 122(String)
2019-2-26 10:46:07 http-nio-8081-exec-10 DEBUG <==    Updates: 1
2019-2-26 10:46:07 http-nio-8081-exec-9 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator,b.num,b.money,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator,a.num,a.money,a.state from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 10:46:07 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:07 http-nio-8081-exec-9 DEBUG <==      Total: 10
2019-2-26 10:46:07 http-nio-8081-exec-9 DEBUG ==>  Preparing: select count(*) from( select a.in_out_code from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 10:46:07 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:07 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 10:46:08 http-nio-8081-exec-8 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 10:46:08 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:08 http-nio-8081-exec-8 DEBUG <==      Total: 10
2019-2-26 10:46:08 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 10:46:08 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:08 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 10:46:09 http-nio-8081-exec-7 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 5 OFFSET 0 
2019-2-26 10:46:09 http-nio-8081-exec-7 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:09 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 10:46:09 http-nio-8081-exec-7 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-26 10:46:09 http-nio-8081-exec-7 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:09 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='481a38d5-4709-4333-aa5a-030938c0df27' limit 1 
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG <==      Total: 0
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG ==>  Preparing: INSERT INTO stock_audit ( audit_id,in_out_id,user_id,user_name,audit_time,remark,is_pass ) VALUES( ?,?,?,?,?,?,? ) 
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG ==> Parameters: 51852e0e-d6cb-4712-803f-f33f170f1773(String), 481a38d5-4709-4333-aa5a-030938c0df27(String), 1(String), admin(String), 2019-02-26 10:46:10.273(Timestamp), (String), 1(Integer)
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG <==    Updates: 1
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG ==>  Preparing: select batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit,sum(inventory_num) inventory_num, sum(money) money from items_temporary where order_id = ? group by batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit 
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG ==> Parameters: RK000009(String)
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG ==>  Preparing: INSERT INTO stock_in_out_de ( in_out_de_id,clinic_id,in_out_code,p_name,type_id,p_type,p_model,p_spe,p_unit,price,num,p_brand,money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost,allowance ) VALUES( ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,? ) 
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG ==> Parameters: 1f528c0c-63a2-49ef-9c58-91c0c1b503cd(String), 122(String), M003772(String), FF莱素芳洗手液架子(String), CD000278(String), 其它(String), (String), 个(String), 个(String), 0.0(Double), 12(Integer), (String), 120.0(Double),  (String), 2020-08-27 00:00:00.0(Timestamp), admin(String), 1(String), 2019-02-26 10:46:10.287(Timestamp), RK000009(String), 进货(String), RK000009(String), 10.0(Double), 12(Integer)
2019-2-26 10:46:10 http-nio-8081-exec-6 DEBUG <==    Updates: 1
2019-2-26 10:46:10 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 10:46:10 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:10 http-nio-8081-exec-5 DEBUG <==      Total: 10
2019-2-26 10:46:10 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 10:46:10 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:10 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 10:46:11 http-nio-8081-exec-4 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator,b.num,b.money,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator,a.num,a.money,a.state from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 10:46:11 http-nio-8081-exec-4 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:11 http-nio-8081-exec-4 DEBUG <==      Total: 10
2019-2-26 10:46:11 http-nio-8081-exec-4 DEBUG ==>  Preparing: select count(*) from( select a.in_out_code from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 10:46:11 http-nio-8081-exec-4 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:11 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from stock_in_out where in_out_code = ? and clinic_id = ? 
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==> Parameters: RK000009(String), 122(String)
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==>  Preparing: UPDATE stock_in_out SET in_out_code = ?,in_out_time = ?,creator_id = ?,creator = ?,money = ?,num = ?,in_obj = ?,out_obj = ?,type = ?,state = ?,clinic_id = ? WHERE in_out_id = ? 
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==> Parameters: RK000009(String), 2019-02-26 10:46:07.0(Timestamp), 1(String), admin(String), 120.0(Double), 12(Integer), 总部(String), 服务商(String), 进货(String), 1.0(Double), 122(String), 481a38d5-4709-4333-aa5a-030938c0df27(String)
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG <==    Updates: 1
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==>  Preparing: select order_id,batch_id,in_out_code,p_name,type_id,p_type,p_model,p_spe,price,p_brand,cost,operation_type,p_unit,sum(num) num,sum(money) money from stock_in_out_de where order_id = ? and clinic_id = ? group by order_id,batch_id,in_out_code,p_name,type_id,p_type,p_model,p_spe,price,p_brand,cost,operation_type,p_unit 
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==> Parameters: RK000009(String), 122(String)
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from stock where clinic_id = ? and product_code = ? 
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from stock_product where product_code = 'M003772' limit 1 
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==>  Preparing: UPDATE stock SET clinic_id = ?,product_type = ?,product_code = ?,product_name = ?,product_model = ?,product_spec = ?,product_brand = ?,product_unit = ?,type_id = ?,stock_num = ?,end_time = ?,sprice = ?,money = ?,remark = ? WHERE stock_id = ? 
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String), 其它(String), M003772(String), FF莱素芳洗手液架子(String), (String), 个(String), (String), 个(String), CD000278(String), 12(Integer), 2020-02-14 00:00:00.0(Timestamp), 10(String), 0.0(Double), (String), fa5f6a8c-303d-11e9-bfbc-00163e02a5bf(String)
2019-2-26 10:46:12 http-nio-8081-exec-3 DEBUG <==    Updates: 1
2019-2-26 10:46:13 http-nio-8081-exec-2 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator,b.num,b.money,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator,a.num,a.money,a.state from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 10:46:13 http-nio-8081-exec-2 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:13 http-nio-8081-exec-2 DEBUG <==      Total: 10
2019-2-26 10:46:13 http-nio-8081-exec-2 DEBUG ==>  Preparing: select count(*) from( select a.in_out_code from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 10:46:13 http-nio-8081-exec-2 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:13 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 10:46:14 http-nio-8081-exec-1 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 10:46:14 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 10:46:14 http-nio-8081-exec-1 DEBUG <==      Total: 8
2019-2-26 10:46:14 http-nio-8081-exec-10 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 10:46:14 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:14 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 10:46:14 http-nio-8081-exec-10 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 10:46:14 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 10:46:14 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 10:46:15 http-nio-8081-exec-9 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 10:46:15 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 10:46:15 http-nio-8081-exec-9 DEBUG <==      Total: 8
2019-2-26 10:46:15 http-nio-8081-exec-8 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 10:46:15 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 10:46:15 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 10:46:15 http-nio-8081-exec-8 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 10:46:15 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 10:46:15 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 10:53:23 http-nio-8081-exec-5 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 10:53:23 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String)
2019-2-26 10:53:23 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 10:53:23 http-nio-8081-exec-5 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 10:53:23 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 10:53:23 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 10:58:01 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-26 10:58:01 http-nio-8081-exec-3 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 10:58:01 http-nio-8081-exec-3 DEBUG <==      Total: 26
2019-2-26 10:58:01 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 10:58:01 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 10:58:01 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 10:58:01 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 10:58:01 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 10:58:01 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 10:58:01 http-nio-8081-exec-1 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 10:58:01 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 10:58:01 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 10:58:01 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 10:58:01 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 10:58:01 http-nio-8081-exec-10 DEBUG <==      Total: 2
2019-2-26 10:58:01 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 10:58:01 http-nio-8081-exec-10 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 10:58:01 http-nio-8081-exec-10 DEBUG <==      Total: 2
2019-2-26 10:58:02 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 10:58:02 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 10:58:02 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 10:58:04 http-nio-8081-exec-8 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 10:58:04 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 10:58:04 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 10:58:04 http-nio-8081-exec-7 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 10:58:04 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 10:58:04 http-nio-8081-exec-7 DEBUG <==      Total: 8
2019-2-26 11:02:55 http-nio-8081-exec-6 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:02:55 http-nio-8081-exec-6 DEBUG ==> Parameters: 122(String)
2019-2-26 11:02:55 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:02:55 http-nio-8081-exec-6 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:02:55 http-nio-8081-exec-6 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:02:55 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:02:57 http-nio-8081-exec-4 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:02:57 http-nio-8081-exec-4 DEBUG ==> Parameters: 122(String)
2019-2-26 11:02:57 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:02:57 http-nio-8081-exec-4 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:02:57 http-nio-8081-exec-4 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:02:57 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:02:57 http-nio-8081-exec-3 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 11:02:57 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:02:57 http-nio-8081-exec-3 DEBUG <==      Total: 8
2019-2-26 11:03:59 http-nio-8081-exec-10 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:03:59 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String)
2019-2-26 11:03:59 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:03:59 http-nio-8081-exec-10 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:03:59 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:03:59 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:03:59 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:03:59 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String)
2019-2-26 11:03:59 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:03:59 http-nio-8081-exec-9 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:03:59 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:03:59 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:03:59 http-nio-8081-exec-8 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:03:59 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 11:03:59 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:03:59 http-nio-8081-exec-8 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:03:59 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:03:59 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:04:00 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:04:00 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String)
2019-2-26 11:04:00 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:04:00 http-nio-8081-exec-7 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:04:00 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:04:00 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:04:02 http-nio-8081-exec-5 DEBUG ==>  Preparing: select t.* from ( select a.batch_id,a.in_out_code,a.p_name,a.p_type,a.p_model,a.p_spe,a.p_unit,a.p_brand,a.end_time,a.money,a.allowance,a.num,a.cost,a.in_out_de_id,a.remark from stock_in_out_de a where a.clinic_id = ? and a.operation_type = '进货' and a.allowance >0 and (a.in_out_code = ? or a.p_name like '%M003772%') ) t order by t.end_time,t.in_out_code LIMIT 10 OFFSET 0 
2019-2-26 11:04:02 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:04:02 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:04:02 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from ( select a.batch_id from stock_in_out_de a where a.clinic_id = ? and a.operation_type = '进货' and a.allowance >0 and (a.in_out_code = ? or a.p_name like '%M003772%') ) t 
2019-2-26 11:04:02 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:04:02 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:04:05 http-nio-8081-exec-6 DEBUG ==>  Preparing: select t.* from ( select a.batch_id,a.in_out_code,a.p_name,a.p_type,a.p_model,a.p_spe,a.p_unit,a.p_brand,a.end_time,a.money,a.allowance,a.num,a.cost,a.in_out_de_id,a.remark from stock_in_out_de a where a.clinic_id = ? and a.operation_type = '进货' and a.allowance >0 and (a.in_out_code = ? or a.p_name like '%M003772%') ) t order by t.end_time,t.in_out_code LIMIT 10 OFFSET 0 
2019-2-26 11:04:05 http-nio-8081-exec-6 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:04:05 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:04:05 http-nio-8081-exec-6 DEBUG ==>  Preparing: select count(*) from ( select a.batch_id from stock_in_out_de a where a.clinic_id = ? and a.operation_type = '进货' and a.allowance >0 and (a.in_out_code = ? or a.p_name like '%M003772%') ) t 
2019-2-26 11:04:05 http-nio-8081-exec-6 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:04:05 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:04:13 http-nio-8081-exec-4 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-26 11:04:13 http-nio-8081-exec-4 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 11:04:13 http-nio-8081-exec-4 DEBUG <==      Total: 26
2019-2-26 11:04:13 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:04:13 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:04:13 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:04:13 http-nio-8081-exec-2 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:04:13 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:04:13 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:04:13 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:04:13 http-nio-8081-exec-2 DEBUG <==      Total: 2
2019-2-26 11:04:13 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:04:13 http-nio-8081-exec-1 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:04:13 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:04:13 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:04:13 http-nio-8081-exec-2 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:04:13 http-nio-8081-exec-2 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:04:13 http-nio-8081-exec-2 DEBUG <==      Total: 2
2019-2-26 11:04:13 http-nio-8081-exec-10 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:04:13 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 11:04:13 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:04:15 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 11:04:15 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:04:15 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:04:15 http-nio-8081-exec-8 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 11:04:15 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:04:15 http-nio-8081-exec-8 DEBUG <==      Total: 8
2019-2-26 11:04:15 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:04:15 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String)
2019-2-26 11:04:15 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:04:15 http-nio-8081-exec-7 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:04:15 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:04:15 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:04:56 http-nio-8081-exec-5 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-26 11:04:56 http-nio-8081-exec-5 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 11:04:56 http-nio-8081-exec-5 DEBUG <==      Total: 26
2019-2-26 11:04:57 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:04:57 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:04:57 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:04:57 http-nio-8081-exec-4 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:04:57 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:04:57 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:04:57 http-nio-8081-exec-3 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:04:57 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:04:57 http-nio-8081-exec-3 DEBUG <==      Total: 2
2019-2-26 11:04:57 http-nio-8081-exec-4 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:04:57 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:04:57 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:04:57 http-nio-8081-exec-3 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:04:57 http-nio-8081-exec-3 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:04:57 http-nio-8081-exec-3 DEBUG <==      Total: 2
2019-2-26 11:04:57 http-nio-8081-exec-2 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:04:57 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:04:57 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:04:57 http-nio-8081-exec-2 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:04:57 http-nio-8081-exec-2 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:04:57 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:05:00 http-nio-8081-exec-1 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 5 OFFSET 0 
2019-2-26 11:05:00 http-nio-8081-exec-1 DEBUG ==> Parameters: RK000010(String)
2019-2-26 11:05:00 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:05:00 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-26 11:05:00 http-nio-8081-exec-1 DEBUG ==> Parameters: RK000010(String)
2019-2-26 11:05:00 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='0f361508-8713-417c-8c05-9122413cd077' limit 1 
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG <==      Total: 0
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG ==>  Preparing: INSERT INTO stock_audit ( audit_id,in_out_id,user_id,user_name,audit_time,remark,is_pass ) VALUES( ?,?,?,?,?,?,? ) 
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG ==> Parameters: ad1e20b1-4aa5-4a05-81bb-b8f120ac9b8b(String), 0f361508-8713-417c-8c05-9122413cd077(String), 1(String), admin(String), 2019-02-26 11:05:02.507(Timestamp), (String), 1(Integer)
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG <==    Updates: 1
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG ==>  Preparing: select batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit,sum(inventory_num) inventory_num, sum(money) money from items_temporary where order_id = ? group by batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit 
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG ==> Parameters: RK000010(String)
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG ==>  Preparing: select sum(allowance) from stock_in_out_de where clinic_id =? and in_out_code = ? and allowance !=0 and end_time > now() group by in_out_code 
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), M003771(String)
2019-2-26 11:05:02 http-nio-8081-exec-10 DEBUG <==      Total: 0
2019-2-26 11:05:05 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 11:05:05 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:05:05 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:05:05 http-nio-8081-exec-8 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 11:05:05 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:05:05 http-nio-8081-exec-8 DEBUG <==      Total: 8
2019-2-26 11:05:05 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:05:05 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String)
2019-2-26 11:05:05 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:05:05 http-nio-8081-exec-7 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:05:05 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:05:05 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:05:45 http-nio-8081-exec-5 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-26 11:05:45 http-nio-8081-exec-5 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 11:05:45 http-nio-8081-exec-5 DEBUG <==      Total: 26
2019-2-26 11:05:45 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:05:45 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:05:45 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:05:45 http-nio-8081-exec-4 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:05:45 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:05:45 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:05:45 http-nio-8081-exec-3 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:05:45 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:05:45 http-nio-8081-exec-3 DEBUG <==      Total: 2
2019-2-26 11:05:45 http-nio-8081-exec-4 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:05:45 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:05:45 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:05:45 http-nio-8081-exec-3 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:05:45 http-nio-8081-exec-3 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:05:45 http-nio-8081-exec-3 DEBUG <==      Total: 2
2019-2-26 11:05:46 http-nio-8081-exec-2 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:05:46 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:05:46 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:05:46 http-nio-8081-exec-2 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:05:46 http-nio-8081-exec-2 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:05:46 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:05:47 http-nio-8081-exec-1 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 5 OFFSET 0 
2019-2-26 11:05:47 http-nio-8081-exec-1 DEBUG ==> Parameters: RK000011(String)
2019-2-26 11:05:47 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:05:47 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-26 11:05:47 http-nio-8081-exec-1 DEBUG ==> Parameters: RK000011(String)
2019-2-26 11:05:47 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='d9b21c32-04e7-424d-a468-22ef8b37275e' limit 1 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==      Total: 0
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: INSERT INTO stock_audit ( audit_id,in_out_id,user_id,user_name,audit_time,remark,is_pass ) VALUES( ?,?,?,?,?,?,? ) 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: f93a5736-b278-4242-af00-d9b9f7f00e9c(String), d9b21c32-04e7-424d-a468-22ef8b37275e(String), 1(String), admin(String), 2019-02-26 11:05:48.833(Timestamp), (String), 1(Integer)
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==    Updates: 1
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: select batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit,sum(inventory_num) inventory_num, sum(money) money from items_temporary where order_id = ? group by batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: RK000011(String)
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: select sum(allowance) from stock_in_out_de where clinic_id =? and in_out_code = ? and allowance !=0 and end_time > now() group by in_out_code 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from stock_in_out_de where clinic_id =? and in_out_code = ? and allowance !=0 and operation_type = '进货' and end_time > now() order by end_time 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: INSERT INTO stock_in_out_de ( in_out_de_id,clinic_id,in_out_code,p_name,type_id,p_type,p_model,p_spe,p_unit,price,num,p_brand,money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost,allowance ) VALUES( ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,? ) 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: 8aa8ff35-faa2-4482-af44-f775f74658c5(String), a9404554-403d-4400-adfa-7684cbccbec0(String), M003772(String), FF莱素芳洗手液架子(String), CD000278(String), 其它(String), (String), 个(String), 个(String), 0.0(Double), 4(Integer), (String), 40.0(Double),  (String), 2020-08-27 00:00:00.0(Timestamp), admin(String), 1(String), 2019-02-26 11:05:48.862(Timestamp), RK000009(String), 进货(String), RK000011(String), 10.0(Double), 4(Integer)
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==    Updates: 1
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: UPDATE stock_in_out_de SET clinic_id = ?,in_out_code = ?,p_name = ?,type_id = ?,p_type = ?,p_model = ?,p_spe = ?,p_unit = ?,price = ?,num = ?,p_brand = ?,money = ?,remark = ?,end_time = ?,user_name = ?,user_id = ?,create_time = ?,batch_id = ?,operation_type = ?,order_id = ?,cost = ?,allowance = ? WHERE in_out_de_id = ? 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), M003772(String), FF莱素芳洗手液架子(String), CD000278(String), 其它(String), (String), 个(String), 个(String), 0.0(Double), 12(Integer), (String), 120.0(Double),  (String), 2020-08-27 00:00:00.0(Timestamp), admin(String), 1(String), 2019-02-26 10:46:10.0(Timestamp), RK000009(String), 进货(String), RK000009(String), 10.0(Double), 8(Integer), 1f528c0c-63a2-49ef-9c58-91c0c1b503cd(String)
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==    Updates: 1
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from stock where clinic_id = ? and product_code = ? 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==>  Preparing: UPDATE stock SET clinic_id = ?,product_type = ?,product_code = ?,product_name = ?,product_model = ?,product_spec = ?,product_brand = ?,product_unit = ?,type_id = ?,stock_num = ?,end_time = ?,sprice = ?,money = ?,remark = ? WHERE stock_id = ? 
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), 其它(String), M003772(String), FF莱素芳洗手液架子(String), (String), 个(String), (String), 个(String), CD000278(String), 8(Integer), 2020-02-14 00:00:00.0(Timestamp), 10(String), 0.0(Double), (String), fa5f6a8c-303d-11e9-bfbc-00163e02a5bf(String)
2019-2-26 11:05:48 http-nio-8081-exec-10 DEBUG <==    Updates: 1
2019-2-26 11:05:48 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:05:48 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:05:48 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:06:19 http-nio-8081-exec-8 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-26 11:06:19 http-nio-8081-exec-8 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 11:06:19 http-nio-8081-exec-8 DEBUG <==      Total: 26
2019-2-26 11:06:19 http-nio-8081-exec-7 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:06:19 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:06:19 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:06:19 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:06:19 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:06:19 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:06:19 http-nio-8081-exec-6 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:06:19 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:06:19 http-nio-8081-exec-6 DEBUG <==      Total: 2
2019-2-26 11:06:19 http-nio-8081-exec-5 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:06:19 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:06:19 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:06:19 http-nio-8081-exec-6 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:06:19 http-nio-8081-exec-6 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:06:19 http-nio-8081-exec-6 DEBUG <==      Total: 2
2019-2-26 11:06:20 http-nio-8081-exec-4 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:06:20 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:06:20 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:06:21 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 11:06:21 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:06:21 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:06:21 http-nio-8081-exec-2 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 11:06:21 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:06:21 http-nio-8081-exec-2 DEBUG <==      Total: 8
2019-2-26 11:06:21 http-nio-8081-exec-1 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:06:21 http-nio-8081-exec-1 DEBUG ==> Parameters: 122(String)
2019-2-26 11:06:21 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:06:22 http-nio-8081-exec-1 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:06:22 http-nio-8081-exec-1 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:06:22 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:06:23 http-nio-8081-exec-10 DEBUG ==>  Preparing: select t.* from ( select a.batch_id,a.in_out_code,a.p_name,a.p_type,a.p_model,a.p_spe,a.p_unit,a.p_brand,a.end_time,a.money,a.allowance,a.num,a.cost,a.in_out_de_id,a.remark from stock_in_out_de a where a.clinic_id = ? and a.operation_type = '进货' and a.allowance >0 and (a.in_out_code = ? or a.p_name like '%M003772%') ) t order by t.end_time,t.in_out_code LIMIT 10 OFFSET 0 
2019-2-26 11:06:23 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:06:23 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:06:23 http-nio-8081-exec-10 DEBUG ==>  Preparing: select count(*) from ( select a.batch_id from stock_in_out_de a where a.clinic_id = ? and a.operation_type = '进货' and a.allowance >0 and (a.in_out_code = ? or a.p_name like '%M003772%') ) t 
2019-2-26 11:06:23 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), M003772(String)
2019-2-26 11:06:23 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:06:27 http-nio-8081-exec-9 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when b.state = 0.5 then '已发送' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id != ? and(a.type='进货' or a.type='退货') and a.clinic_id = b.id_ order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 11:06:27 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String)
2019-2-26 11:06:27 http-nio-8081-exec-9 DEBUG <==      Total: 7
2019-2-26 11:06:27 http-nio-8081-exec-9 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id != ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 11:06:27 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String)
2019-2-26 11:06:27 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:06:28 http-nio-8081-exec-8 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 11:06:28 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 11:06:28 http-nio-8081-exec-8 DEBUG <==      Total: 10
2019-2-26 11:06:28 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 11:06:28 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 11:06:28 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:06:46 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-26 11:06:46 http-nio-8081-exec-7 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 11:06:46 http-nio-8081-exec-7 DEBUG <==      Total: 26
2019-2-26 11:06:46 http-nio-8081-exec-5 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:06:46 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:06:46 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:06:47 http-nio-8081-exec-6 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:06:47 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:06:47 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:06:47 http-nio-8081-exec-6 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:06:47 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:06:47 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:06:47 http-nio-8081-exec-4 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:06:47 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:06:47 http-nio-8081-exec-4 DEBUG <==      Total: 2
2019-2-26 11:06:47 http-nio-8081-exec-4 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:06:47 http-nio-8081-exec-4 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:06:47 http-nio-8081-exec-4 DEBUG <==      Total: 2
2019-2-26 11:06:47 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:06:47 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:06:47 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:06:47 http-nio-8081-exec-3 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:06:47 http-nio-8081-exec-3 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:06:47 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:06:48 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 5 OFFSET 0 
2019-2-26 11:06:48 http-nio-8081-exec-2 DEBUG ==> Parameters: RK000012(String)
2019-2-26 11:06:48 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:06:48 http-nio-8081-exec-2 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-26 11:06:48 http-nio-8081-exec-2 DEBUG ==> Parameters: RK000012(String)
2019-2-26 11:06:48 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='49b0826c-c463-494e-8933-d37cb731c850' limit 1 
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG <==      Total: 0
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG ==>  Preparing: INSERT INTO stock_audit ( audit_id,in_out_id,user_id,user_name,audit_time,remark,is_pass ) VALUES( ?,?,?,?,?,?,? ) 
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG ==> Parameters: 6141eaf6-dea2-4886-bb88-43c6b5eb0616(String), 49b0826c-c463-494e-8933-d37cb731c850(String), 1(String), admin(String), 2019-02-26 11:06:50.901(Timestamp), (String), 1(Integer)
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG <==    Updates: 1
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG ==>  Preparing: select batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit,sum(inventory_num) inventory_num, sum(money) money from items_temporary where order_id = ? group by batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit 
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG ==> Parameters: RK000012(String)
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG ==>  Preparing: select sum(allowance) from stock_in_out_de where clinic_id =? and in_out_code = ? and allowance !=0 and end_time > now() group by in_out_code 
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG ==> Parameters: 122(String), M000010(String)
2019-2-26 11:06:50 http-nio-8081-exec-1 DEBUG <==      Total: 0
2019-2-26 11:06:56 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 10 OFFSET 0 
2019-2-26 11:06:56 http-nio-8081-exec-10 DEBUG ==> Parameters: RK000012(String)
2019-2-26 11:06:56 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:06:56 http-nio-8081-exec-10 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-26 11:06:56 http-nio-8081-exec-10 DEBUG ==> Parameters: RK000012(String)
2019-2-26 11:06:56 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:07:00 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:07:00 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:07:00 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:07:00 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:07:00 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:07:00 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:07:00 http-nio-8081-exec-7 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:07:00 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:07:00 http-nio-8081-exec-7 DEBUG <==      Total: 2
2019-2-26 11:07:00 http-nio-8081-exec-8 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:07:00 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:07:00 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:07:00 http-nio-8081-exec-7 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:07:00 http-nio-8081-exec-7 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:07:00 http-nio-8081-exec-7 DEBUG <==      Total: 2
2019-2-26 11:07:00 http-nio-8081-exec-5 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:07:00 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:07:00 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:07:01 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 11:07:01 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:07:01 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:07:01 http-nio-8081-exec-4 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 11:07:01 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:07:01 http-nio-8081-exec-4 DEBUG <==      Total: 8
2019-2-26 11:07:02 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:07:02 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String)
2019-2-26 11:07:02 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:07:02 http-nio-8081-exec-3 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:07:02 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:07:02 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:11:54 main INFO The following profiles are active: dev
2019-2-26 11:12:04 main DEBUG ==>  Preparing: SELECT * FROM sec_menu sm where deleted=0 AND sm.STANBY_ID1 = '2' ORDER BY SORT 
2019-2-26 11:12:04 main DEBUG ==> Parameters: 
2019-2-26 11:12:04 main DEBUG <==      Total: 48
2019-2-26 11:12:04 main INFO JedisPoolעɹ
2019-2-26 11:12:04 main INFO redisַlocalhost:6379
2019-2-26 11:12:17 main INFO Started BaseFrameApplicationTests in 29.129 seconds (JVM running for 33.171)
2019-2-26 11:20:19 http-nio-8081-exec-10 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-26 11:20:19 http-nio-8081-exec-10 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-26 11:20:19 http-nio-8081-exec-10 DEBUG <==      Total: 26
2019-2-26 11:20:20 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:20:20 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:20:20 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:20 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:20:20 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:20:20 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:20:20 http-nio-8081-exec-7 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:20 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:20:20 http-nio-8081-exec-8 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:20:20 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:20:20 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:20:20 http-nio-8081-exec-7 DEBUG <==      Total: 2
2019-2-26 11:20:20 http-nio-8081-exec-7 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:20 http-nio-8081-exec-7 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:20:20 http-nio-8081-exec-7 DEBUG <==      Total: 2
2019-2-26 11:20:20 http-nio-8081-exec-5 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:20:20 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:20:20 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:20:20 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:20:20 http-nio-8081-exec-5 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:20:20 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:20:21 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 11:20:21 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:20:21 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:21 http-nio-8081-exec-4 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 11:20:21 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:20:21 http-nio-8081-exec-4 DEBUG <==      Total: 8
2019-2-26 11:20:22 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:20:22 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:22 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:22 http-nio-8081-exec-3 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:20:22 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:20:22 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:24 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:20:24 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:20:24 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:20:24 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:20:24 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:20:24 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:24 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 11:20:24 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:24 http-nio-8081-exec-10 DEBUG <==      Total: 2
2019-2-26 11:20:24 http-nio-8081-exec-1 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:20:24 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:20:24 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:24 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:24 http-nio-8081-exec-10 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:20:24 http-nio-8081-exec-10 DEBUG <==      Total: 2
2019-2-26 11:20:24 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:20:24 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:20:24 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:24 http-nio-8081-exec-9 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:20:24 http-nio-8081-exec-9 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:20:24 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:25 http-nio-8081-exec-8 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 5 OFFSET 0 
2019-2-26 11:20:25 http-nio-8081-exec-8 DEBUG ==> Parameters: RK000013(String)
2019-2-26 11:20:25 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:20:25 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-26 11:20:25 http-nio-8081-exec-8 DEBUG ==> Parameters: RK000013(String)
2019-2-26 11:20:25 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='159b111f-6622-4b77-a055-8460411df556' limit 1 
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG <==      Total: 0
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG ==>  Preparing: select batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit,sum(inventory_num) inventory_num, sum(money) money from items_temporary where order_id = ? group by batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit 
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG ==> Parameters: RK000013(String)
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG ==>  Preparing: select sum(allowance) from stock_in_out_de where clinic_id =? and in_out_code = ? and allowance !=0 and end_time > now() group by in_out_code 
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String), M000011(String)
2019-2-26 11:20:27 http-nio-8081-exec-7 DEBUG <==      Total: 0
2019-2-26 11:20:31 http-nio-8081-exec-5 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:20:31 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:20:31 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:20:31 http-nio-8081-exec-4 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:31 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:20:31 http-nio-8081-exec-6 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:20:31 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:20:31 http-nio-8081-exec-4 DEBUG <==      Total: 2
2019-2-26 11:20:31 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:31 http-nio-8081-exec-4 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:31 http-nio-8081-exec-4 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:20:31 http-nio-8081-exec-6 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:20:31 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:20:31 http-nio-8081-exec-4 DEBUG <==      Total: 2
2019-2-26 11:20:31 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:31 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:20:31 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:20:31 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:31 http-nio-8081-exec-3 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:20:31 http-nio-8081-exec-3 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:20:31 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:31 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:20:31 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:20:31 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:20:31 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:20:32 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:32 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:32 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-1 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:20:32 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-10 DEBUG <==      Total: 2
2019-2-26 11:20:32 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:32 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:32 http-nio-8081-exec-10 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:20:32 http-nio-8081-exec-10 DEBUG <==      Total: 2
2019-2-26 11:20:32 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:20:32 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:32 http-nio-8081-exec-9 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:20:32 http-nio-8081-exec-9 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:20:32 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:32 http-nio-8081-exec-8 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:20:32 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:20:32 http-nio-8081-exec-7 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:20:32 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:32 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:20:32 http-nio-8081-exec-5 DEBUG <==      Total: 2
2019-2-26 11:20:32 http-nio-8081-exec-7 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:20:32 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:32 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:20:32 http-nio-8081-exec-5 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:20:32 http-nio-8081-exec-5 DEBUG <==      Total: 2
2019-2-26 11:20:32 http-nio-8081-exec-6 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:20:32 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:20:32 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:32 http-nio-8081-exec-6 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:20:32 http-nio-8081-exec-6 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:20:32 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:33 http-nio-8081-exec-4 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 5 OFFSET 0 
2019-2-26 11:20:33 http-nio-8081-exec-4 DEBUG ==> Parameters: RK000013(String)
2019-2-26 11:20:33 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:20:33 http-nio-8081-exec-4 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-26 11:20:33 http-nio-8081-exec-4 DEBUG ==> Parameters: RK000013(String)
2019-2-26 11:20:33 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='159b111f-6622-4b77-a055-8460411df556' limit 1 
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG <==      Total: 0
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG ==>  Preparing: select batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit,sum(inventory_num) inventory_num, sum(money) money from items_temporary where order_id = ? group by batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit 
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG ==> Parameters: RK000013(String)
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG ==>  Preparing: select sum(allowance) from stock_in_out_de where clinic_id =? and in_out_code = ? and allowance !=0 and end_time > now() group by in_out_code 
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String), M000011(String)
2019-2-26 11:20:34 http-nio-8081-exec-3 DEBUG <==      Total: 0
2019-2-26 11:20:36 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:20:36 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:20:36 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:20:36 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:20:36 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:20:36 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:36 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:36 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 11:20:36 http-nio-8081-exec-1 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:20:36 http-nio-8081-exec-10 DEBUG <==      Total: 2
2019-2-26 11:20:36 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:20:36 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:36 http-nio-8081-exec-10 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:36 http-nio-8081-exec-10 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:20:36 http-nio-8081-exec-10 DEBUG <==      Total: 2
2019-2-26 11:20:36 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:20:36 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:20:36 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:36 http-nio-8081-exec-9 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:20:36 http-nio-8081-exec-9 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:20:36 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:36 http-nio-8081-exec-8 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:20:36 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:20:36 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:37 http-nio-8081-exec-7 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:20:37 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-5 DEBUG <==      Total: 2
2019-2-26 11:20:37 http-nio-8081-exec-7 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:20:37 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:37 http-nio-8081-exec-5 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:20:37 http-nio-8081-exec-5 DEBUG <==      Total: 2
2019-2-26 11:20:37 http-nio-8081-exec-6 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:20:37 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-6 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:20:37 http-nio-8081-exec-6 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:20:37 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-4 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-26 11:20:37 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-2 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:37 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-2 DEBUG <==      Total: 2
2019-2-26 11:20:37 http-nio-8081-exec-2 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-26 11:20:37 http-nio-8081-exec-2 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-26 11:20:37 http-nio-8081-exec-2 DEBUG <==      Total: 2
2019-2-26 11:20:37 http-nio-8081-exec-3 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-26 11:20:37 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-3 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-26 11:20:37 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-1 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-26 11:20:37 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:20:37 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:37 http-nio-8081-exec-1 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-26 11:20:37 http-nio-8081-exec-1 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 11:20:37 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:40 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from sec_menu where ID_='5eaa4b9d-3bf6-43c2-aac6-f4c9cb034167' limit 1 
2019-2-26 11:20:40 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 11:20:40 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:20:41 http-nio-8081-exec-9 DEBUG ==>  Preparing: select ID_ id ,ORG_NAME name from sec_org where DELETED = 0 and state = 1 and type='门诊' 
2019-2-26 11:20:41 http-nio-8081-exec-8 DEBUG ==>  Preparing: select id_ id,user_name name,org_id clinic from sec_user where standby1='医生' and status = '启用' and deleted = 0 
2019-2-26 11:20:41 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 11:20:41 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:20:41 http-nio-8081-exec-9 DEBUG <==      Total: 2
2019-2-26 11:20:41 http-nio-8081-exec-9 DEBUG ==>  Preparing: select ID_ id, USER_NAME name,ORG_ID orgId from sec_user where DELETED = 0 and STANDBY1 = '医生' 
2019-2-26 11:20:41 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 11:20:41 http-nio-8081-exec-9 DEBUG <==      Total: 5
2019-2-26 11:20:41 http-nio-8081-exec-8 DEBUG <==      Total: 5
2019-2-26 11:20:41 http-nio-8081-exec-7 DEBUG ==>  Preparing: select ID_ id ,ORG_NAME name,PARENT_ID pId,case when id_='122' then 1 else 0 end open from sec_org where DELETED = 0 and state = 1 
2019-2-26 11:20:41 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 11:20:41 http-nio-8081-exec-7 DEBUG <==      Total: 3
2019-2-26 11:20:41 http-nio-8081-exec-5 DEBUG ==>  Preparing: select c.*,o.ORG_NAME,(select u.USER_NAME from sec_user u where u.ID_=c.doctor) as USER_NAME,(select b.bl_time from cust_bl b where b.cust_id=c.cust_id ORDER BY b.bl_time LIMIT 1) as bl_time ,(select u.USER_NAME from sec_user u where u.ID_=c.early_doctor) as early_doctor_name,(select a.org_name from sec_org a where a.ID_ = c.early_clinic) as early_clinic_name from customer c,sec_org o where c.cust_clinic=o.ID_ 
2019-2-26 11:20:41 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 11:20:41 http-nio-8081-exec-5 DEBUG <==      Total: 59
2019-2-26 11:20:42 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from sec_menu where ID_='chai-wu-guan-li' limit 1 
2019-2-26 11:20:42 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 11:20:42 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:42 http-nio-8081-exec-2 DEBUG ==>  Preparing: select ID_ id ,ORG_NAME name from sec_org where DELETED = 0 and state = 1 and type='门诊' 
2019-2-26 11:20:42 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:20:42 http-nio-8081-exec-2 DEBUG <==      Total: 2
2019-2-26 11:20:42 http-nio-8081-exec-2 DEBUG ==>  Preparing: select ID_ id, USER_NAME name,ORG_ID orgId from sec_user where DELETED = 0 and STANDBY1 = '医生' 
2019-2-26 11:20:42 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 11:20:42 http-nio-8081-exec-4 DEBUG ==>  Preparing: select count(*) count,case when sum(s.sf_money) is null then 0 else sum(s.sf_money) end money from cust_sfjl s,customer c where s.cust_id=c.cust_id and s.deleted=0 and date_format(s.create_time,'%Y-%m-%d') >= ? and ? >= date_format(s.create_time,'%Y-%m-%d') 
2019-2-26 11:20:42 http-nio-8081-exec-4 DEBUG ==> Parameters: 2019-01-01(String), 2019-12-31(String)
2019-2-26 11:20:42 http-nio-8081-exec-2 DEBUG <==      Total: 5
2019-2-26 11:20:42 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:20:42 http-nio-8081-exec-4 DEBUG ==>  Preparing: select count(*) count,case when sum(s.sf_money - s.arrears) is null then 0 else sum(s.sf_money - s.arrears) end money from cust_sfjl s,customer c where s.cust_id=c.cust_id and s.deleted=0 and date_format(s.create_time,'%Y-%m-%d') >= ? and ? >= date_format(s.create_time,'%Y-%m-%d') 
2019-2-26 11:20:42 http-nio-8081-exec-4 DEBUG ==> Parameters: 2019-01-01(String), 2019-12-31(String)
2019-2-26 11:20:42 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:20:42 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT s.* FROM cust_sfjl s, customer c WHERE s.cust_id = c.cust_id AND s.deleted = 0 AND date_format(s.create_time, '%Y-%m-%d') >= ? AND ? >= date_format(s.create_time, '%Y-%m-%d')) t LEFT JOIN sec_user b ON t.cashier = b.ID_ 
2019-2-26 11:20:42 http-nio-8081-exec-3 DEBUG ==> Parameters: 2019-01-01(String), 2019-12-31(String)
2019-2-26 11:20:42 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:42 http-nio-8081-exec-3 DEBUG ==>  Preparing: select t.*,b.user_name from ( select s.* from cust_sfjl s,customer c where s.cust_id=c.cust_id and s.deleted=0 and date_format(s.create_time,'%Y-%m-%d') >= ? and ? >= date_format(s.create_time,'%Y-%m-%d') ) t left join sec_user b on t.cashier = b.ID_ order by t.create_time desc limit ?,? 
2019-2-26 11:20:42 http-nio-8081-exec-3 DEBUG ==> Parameters: 2019-01-01(String), 2019-12-31(String), 0(Integer), 10(Integer)
2019-2-26 11:20:42 http-nio-8081-exec-3 DEBUG <==      Total: 10
2019-2-26 11:20:43 http-nio-8081-exec-1 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 11:20:43 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 11:20:43 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:43 http-nio-8081-exec-10 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 11:20:43 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 11:20:43 http-nio-8081-exec-10 DEBUG <==      Total: 8
2019-2-26 11:20:43 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 11:20:43 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:43 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:43 http-nio-8081-exec-9 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 11:20:43 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 11:20:43 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:20:45 http-nio-8081-exec-8 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 11:20:45 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:45 http-nio-8081-exec-8 DEBUG <==      Total: 10
2019-2-26 11:20:45 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id = ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 11:20:45 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:45 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:20:45 http-nio-8081-exec-7 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when b.state = 0.5 then '已发送' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id != ? and(a.type='进货' or a.type='退货') and a.clinic_id = b.id_ order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 11:20:45 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:45 http-nio-8081-exec-7 DEBUG <==      Total: 9
2019-2-26 11:20:45 http-nio-8081-exec-7 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id != ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 11:20:45 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:45 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 11:20:46 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when b.state = 0.5 then '已发送' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id != ? and(a.type='进货' or a.type='退货') and a.clinic_id = b.id_ order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 11:20:46 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:46 http-nio-8081-exec-5 DEBUG <==      Total: 9
2019-2-26 11:20:46 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id != ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 11:20:46 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:46 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 11:20:46 http-nio-8081-exec-6 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when b.state = 0.5 then '已发送' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id != ? and(a.type='进货' or a.type='退货') and a.clinic_id = b.id_ order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-26 11:20:46 http-nio-8081-exec-6 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:46 http-nio-8081-exec-6 DEBUG <==      Total: 9
2019-2-26 11:20:46 http-nio-8081-exec-6 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id != ? and (a.type='进货' or a.type='退货') ) t 
2019-2-26 11:20:46 http-nio-8081-exec-6 DEBUG ==> Parameters: 122(String)
2019-2-26 11:20:46 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-26 11:20:48 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 10 OFFSET 0 
2019-2-26 11:20:48 http-nio-8081-exec-2 DEBUG ==> Parameters: RK000013(String)
2019-2-26 11:20:48 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:20:48 http-nio-8081-exec-2 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-26 11:20:48 http-nio-8081-exec-2 DEBUG ==> Parameters: RK000013(String)
2019-2-26 11:20:48 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 11:20:50 http-nio-8081-exec-4 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-26 11:20:50 http-nio-8081-exec-4 DEBUG ==> Parameters: RK000012(String)
2019-2-26 11:20:50 http-nio-8081-exec-4 DEBUG <==      Total: 0
2019-2-26 11:20:50 http-nio-8081-exec-4 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-26 11:20:50 http-nio-8081-exec-4 DEBUG ==> Parameters: RK000012(String)
2019-2-26 11:20:50 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 11:20:53 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-26 11:20:53 http-nio-8081-exec-3 DEBUG ==> Parameters: RK000011(String)
2019-2-26 11:20:53 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:53 http-nio-8081-exec-3 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-26 11:20:53 http-nio-8081-exec-3 DEBUG ==> Parameters: RK000011(String)
2019-2-26 11:20:53 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 11:20:56 http-nio-8081-exec-1 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-26 11:20:56 http-nio-8081-exec-1 DEBUG ==> Parameters: RK000010(String)
2019-2-26 11:20:56 http-nio-8081-exec-1 DEBUG <==      Total: 0
2019-2-26 11:20:56 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-26 11:20:56 http-nio-8081-exec-1 DEBUG ==> Parameters: RK000010(String)
2019-2-26 11:20:56 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 11:20:59 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-26 11:20:59 http-nio-8081-exec-10 DEBUG ==> Parameters: RK000005(String)
2019-2-26 11:20:59 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:20:59 http-nio-8081-exec-10 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-26 11:20:59 http-nio-8081-exec-10 DEBUG ==> Parameters: RK000005(String)
2019-2-26 11:20:59 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 11:21:03 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-26 11:21:03 http-nio-8081-exec-9 DEBUG ==> Parameters: RK000004(String)
2019-2-26 11:21:03 http-nio-8081-exec-9 DEBUG <==      Total: 5
2019-2-26 11:21:03 http-nio-8081-exec-9 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-26 11:21:03 http-nio-8081-exec-9 DEBUG ==> Parameters: RK000004(String)
2019-2-26 11:21:03 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 11:21:06 http-nio-8081-exec-8 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-26 11:21:06 http-nio-8081-exec-8 DEBUG ==> Parameters: D1550643497833(String)
2019-2-26 11:21:06 http-nio-8081-exec-8 DEBUG <==      Total: 10
2019-2-26 11:21:06 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-26 11:21:06 http-nio-8081-exec-8 DEBUG ==> Parameters: D1550643497833(String)
2019-2-26 11:21:06 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 11:21:10 http-nio-8081-exec-7 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-26 11:21:10 http-nio-8081-exec-7 DEBUG ==> Parameters: M1550138763938(String)
2019-2-26 11:21:10 http-nio-8081-exec-7 DEBUG <==      Total: 10
2019-2-26 11:21:10 http-nio-8081-exec-7 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-26 11:21:10 http-nio-8081-exec-7 DEBUG ==> Parameters: M1550138763938(String)
2019-2-26 11:21:10 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 12:06:59 http-nio-8081-exec-4 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-08' limit 1 
2019-2-26 12:06:59 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 12:06:59 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-26 12:07:00 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT ID_ as id,ORG_NAME as name,PARENT_ID as parentId ,1 AS TYPES,'true' open FROM sec_org WHERE DELETED=0 
2019-2-26 12:07:00 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 12:07:00 http-nio-8081-exec-3 DEBUG <==      Total: 3
2019-2-26 12:07:00 http-nio-8081-exec-1 DEBUG ==>  Preparing: SELECT count(0) FROM sec_user u LEFT JOIN sec_org so ON u.ORG_id = so.ID_ WHERE u.DELETED = 0 
2019-2-26 12:07:00 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 12:07:00 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 12:07:00 http-nio-8081-exec-1 DEBUG ==>  Preparing: SELECT u.*,so.TYPE FROM sec_user u LEFT JOIN sec_org so on u.ORG_id = so.ID_ WHERE u.DELETED=0 ORDER BY u.CREATE_TIME DESC limit ?,? 
2019-2-26 12:07:00 http-nio-8081-exec-1 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-26 12:07:00 http-nio-8081-exec-1 DEBUG <==      Total: 10
2019-2-26 12:07:01 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-26 12:07:01 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 12:07:01 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 12:07:01 http-nio-8081-exec-9 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 12:07:01 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 12:07:01 http-nio-8081-exec-9 DEBUG <==      Total: 8
2019-2-26 12:07:01 http-nio-8081-exec-8 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-26 12:07:01 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-26 12:07:01 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 12:07:01 http-nio-8081-exec-8 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-26 12:07:01 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-26 12:07:01 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 12:07:02 http-nio-8081-exec-7 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 12:07:02 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 12:07:02 http-nio-8081-exec-7 DEBUG <==      Total: 8
2019-2-26 12:07:02 http-nio-8081-exec-5 DEBUG ==>  Preparing: select t.* from ( select * from stock_product_type where 1=1 order by create_time) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:02 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 12:07:02 http-nio-8081-exec-5 DEBUG <==      Total: 8
2019-2-26 12:07:02 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from stock_product_type where 1=1 
2019-2-26 12:07:02 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 12:07:02 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 12:07:03 http-nio-8081-exec-6 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 12:07:03 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 12:07:03 http-nio-8081-exec-6 DEBUG <==      Total: 8
2019-2-26 12:07:03 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:03 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 12:07:03 http-nio-8081-exec-2 DEBUG <==      Total: 10
2019-2-26 12:07:03 http-nio-8081-exec-2 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 
2019-2-26 12:07:03 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-26 12:07:03 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-26 12:07:04 http-nio-8081-exec-4 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-26 12:07:04 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-26 12:07:04 http-nio-8081-exec-4 DEBUG <==      Total: 8
2019-2-26 12:07:04 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:04 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 12:07:04 http-nio-8081-exec-3 DEBUG <==      Total: 10
2019-2-26 12:07:04 http-nio-8081-exec-3 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 
2019-2-26 12:07:04 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-26 12:07:04 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-26 12:07:06 http-nio-8081-exec-1 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 and type_id like '%CD000260%' ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:06 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-26 12:07:06 http-nio-8081-exec-1 DEBUG <==      Total: 10
2019-2-26 12:07:06 http-nio-8081-exec-1 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 and type_id = ? 
2019-2-26 12:07:06 http-nio-8081-exec-1 DEBUG ==> Parameters: CD000260(String)
2019-2-26 12:07:06 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-26 12:07:07 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 and type_id like '%CD000261%' ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:07 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-26 12:07:07 http-nio-8081-exec-10 DEBUG <==      Total: 10
2019-2-26 12:07:07 http-nio-8081-exec-10 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 and type_id = ? 
2019-2-26 12:07:07 http-nio-8081-exec-10 DEBUG ==> Parameters: CD000261(String)
2019-2-26 12:07:07 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-26 12:07:08 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 and type_id like '%CD000263%' ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:08 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-26 12:07:08 http-nio-8081-exec-9 DEBUG <==      Total: 10
2019-2-26 12:07:08 http-nio-8081-exec-9 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 and type_id = ? 
2019-2-26 12:07:08 http-nio-8081-exec-9 DEBUG ==> Parameters: CD000263(String)
2019-2-26 12:07:08 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-26 12:07:09 http-nio-8081-exec-8 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 and type_id like '%CD000264%' ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:09 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-26 12:07:09 http-nio-8081-exec-8 DEBUG <==      Total: 4
2019-2-26 12:07:09 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 and type_id = ? 
2019-2-26 12:07:09 http-nio-8081-exec-8 DEBUG ==> Parameters: CD000264(String)
2019-2-26 12:07:09 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-26 12:07:09 http-nio-8081-exec-7 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 and type_id like '%CD000277%' ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:09 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-26 12:07:09 http-nio-8081-exec-7 DEBUG <==      Total: 10
2019-2-26 12:07:09 http-nio-8081-exec-7 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 and type_id = ? 
2019-2-26 12:07:09 http-nio-8081-exec-7 DEBUG ==> Parameters: CD000277(String)
2019-2-26 12:07:09 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-26 12:07:10 http-nio-8081-exec-5 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 and type_id like '%CD000278%' ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:10 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-26 12:07:10 http-nio-8081-exec-5 DEBUG <==      Total: 10
2019-2-26 12:07:10 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 and type_id = ? 
2019-2-26 12:07:10 http-nio-8081-exec-5 DEBUG ==> Parameters: CD000278(String)
2019-2-26 12:07:10 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-26 12:07:10 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from (select * from stock_product where 1=1 and type_id like '%CD000279%' ) t LIMIT 10 OFFSET 0 
2019-2-26 12:07:10 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-26 12:07:10 http-nio-8081-exec-6 DEBUG <==      Total: 0
2019-2-26 12:07:10 http-nio-8081-exec-6 DEBUG ==>  Preparing: select count(*) from stock_product where 1=1 and type_id = ? 
2019-2-26 12:07:10 http-nio-8081-exec-6 DEBUG ==> Parameters: CD000279(String)
2019-2-26 12:07:10 http-nio-8081-exec-6 DEBUG <==      Total: 1
