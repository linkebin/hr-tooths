2019-2-22 18:00:33 http-nio-8081-exec-6 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-22 18:00:33 http-nio-8081-exec-6 DEBUG ==> Parameters: f60b4f46-1f4c-41dd-a12f-ff058bd3f965(String), f60b4f46-1f4c-41dd-a12f-ff058bd3f965(String), f60b4f46-1f4c-41dd-a12f-ff058bd3f965(String)
2019-2-22 18:00:33 http-nio-8081-exec-6 DEBUG <==      Total: 0
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT * FROM sec_user WHERE DELETED=0 AND ACCOUNT = ? 
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG ==> Parameters: admin(String)
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT sec_menu.URL FROM sec_menu WHERE DELETED = 0 AND MENU_TYPE = 2 AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID WHERE u.ID_ = ? ) 
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG <==      Total: 20
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG ==>  Preparing: INSERT INTO login_log ( log_id,user_id,user_name,account_type,login_type,login_ip,login_time,user_account,success ) VALUES( ?,?,?,?,?,?,?,?,? ) 
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG ==> Parameters: 7846a179-0d1c-4a3d-84ba-78215c5973f4(String), 1(String), admin(String), 管理员(String), 管理端(String), 0:0:0:0:0:0:0:1(String), 2019-02-22 18:00:45.086(Timestamp), admin(String), 是(String)
2019-2-22 18:00:45 http-nio-8081-exec-7 DEBUG <==    Updates: 1
2019-2-22 18:00:45 http-nio-8081-exec-8 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-22 18:00:45 http-nio-8081-exec-8 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-22 18:00:45 http-nio-8081-exec-8 DEBUG <==      Total: 26
2019-2-22 18:00:45 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-22 18:00:45 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-22 18:00:45 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-22 18:00:46 http-nio-8081-exec-10 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-22 18:00:46 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-22 18:00:46 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-22 18:00:46 http-nio-8081-exec-1 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-22 18:00:46 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-22 18:00:46 http-nio-8081-exec-10 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-22 18:00:46 http-nio-8081-exec-1 DEBUG <==      Total: 2
2019-2-22 18:00:46 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-22 18:00:46 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-22 18:00:46 http-nio-8081-exec-1 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-22 18:00:46 http-nio-8081-exec-1 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-22 18:00:46 http-nio-8081-exec-1 DEBUG <==      Total: 2
2019-2-22 18:00:46 http-nio-8081-exec-2 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-22 18:00:46 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-22 18:00:46 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-22 18:00:46 http-nio-8081-exec-2 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-22 18:00:46 http-nio-8081-exec-2 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-22 18:00:46 http-nio-8081-exec-2 DEBUG <==      Total: 3
2019-2-22 18:00:49 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-22 18:00:49 http-nio-8081-exec-3 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-22 18:00:49 http-nio-8081-exec-3 DEBUG <==      Total: 26
2019-2-22 18:00:49 http-nio-8081-exec-4 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-22 18:00:49 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-22 18:00:49 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-22 18:00:49 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-22 18:00:49 http-nio-8081-exec-6 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-22 18:00:49 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-22 18:00:49 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-22 18:00:49 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-22 18:00:49 http-nio-8081-exec-6 DEBUG <==      Total: 2
2019-2-22 18:00:49 http-nio-8081-exec-5 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-22 18:00:49 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-22 18:00:49 http-nio-8081-exec-6 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-22 18:00:49 http-nio-8081-exec-6 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-22 18:00:49 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-22 18:00:49 http-nio-8081-exec-6 DEBUG <==      Total: 2
2019-2-22 18:00:49 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-22 18:00:49 http-nio-8081-exec-7 DEBUG ==> Parameters: 
2019-2-22 18:00:49 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-22 18:00:49 http-nio-8081-exec-7 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-22 18:00:49 http-nio-8081-exec-7 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-22 18:00:49 http-nio-8081-exec-7 DEBUG <==      Total: 3
2019-2-22 18:00:51 http-nio-8081-exec-8 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-22 18:00:51 http-nio-8081-exec-8 DEBUG ==> Parameters: 
2019-2-22 18:00:51 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-22 18:00:51 http-nio-8081-exec-9 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-22 18:00:51 http-nio-8081-exec-9 DEBUG ==> Parameters: 
2019-2-22 18:00:51 http-nio-8081-exec-9 DEBUG <==      Total: 7
2019-2-22 18:00:51 http-nio-8081-exec-10 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:00:51 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String)
2019-2-22 18:00:51 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-22 18:00:51 http-nio-8081-exec-10 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:00:51 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-22 18:00:51 http-nio-8081-exec-10 DEBUG <==      Total: 10
2019-2-22 18:00:51 http-nio-8081-exec-1 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-22 18:00:51 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-22 18:00:51 http-nio-8081-exec-1 DEBUG <==      Total: 7
2019-2-22 18:00:52 http-nio-8081-exec-2 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:00:52 http-nio-8081-exec-2 DEBUG ==> Parameters: 122(String)
2019-2-22 18:00:52 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-22 18:00:52 http-nio-8081-exec-2 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:00:52 http-nio-8081-exec-2 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-22 18:00:52 http-nio-8081-exec-2 DEBUG <==      Total: 10
2019-2-22 18:00:53 http-nio-8081-exec-3 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:00:53 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String)
2019-2-22 18:00:53 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-22 18:00:53 http-nio-8081-exec-3 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:00:53 http-nio-8081-exec-3 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-22 18:00:53 http-nio-8081-exec-3 DEBUG <==      Total: 10
2019-2-22 18:00:54 http-nio-8081-exec-4 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-22 18:00:54 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-22 18:00:54 http-nio-8081-exec-4 DEBUG <==      Total: 7
2019-2-22 18:00:54 http-nio-8081-exec-5 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:00:54 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String)
2019-2-22 18:00:54 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-22 18:00:54 http-nio-8081-exec-5 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:00:54 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-22 18:00:54 http-nio-8081-exec-5 DEBUG <==      Total: 10
2019-2-22 18:00:56 http-nio-8081-exec-6 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:00:56 http-nio-8081-exec-6 DEBUG ==> Parameters: 122(String)
2019-2-22 18:00:56 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-22 18:00:56 http-nio-8081-exec-6 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:00:56 http-nio-8081-exec-6 DEBUG ==> Parameters: 122(String), 10(Integer), 10(Integer)
2019-2-22 18:00:56 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-22 18:00:57 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0 AND type_id = ?) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:00:57 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String), CD000278(String)
2019-2-22 18:00:57 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-22 18:00:57 http-nio-8081-exec-7 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 and type_id = ? ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:00:57 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String), CD000278(String), 0(Integer), 10(Integer)
2019-2-22 18:00:57 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-22 18:00:58 http-nio-8081-exec-8 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0 AND type_id = ?) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:00:58 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String), CD000277(String)
2019-2-22 18:00:58 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-22 18:00:58 http-nio-8081-exec-8 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 and type_id = ? ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:00:58 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String), CD000277(String), 0(Integer), 10(Integer)
2019-2-22 18:00:58 http-nio-8081-exec-8 DEBUG <==      Total: 3
2019-2-22 18:00:58 http-nio-8081-exec-9 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0 AND type_id = ?) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:00:58 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String), CD000278(String)
2019-2-22 18:00:58 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-22 18:00:58 http-nio-8081-exec-9 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 and type_id = ? ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:00:58 http-nio-8081-exec-9 DEBUG ==> Parameters: 122(String), CD000278(String), 0(Integer), 10(Integer)
2019-2-22 18:00:58 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-22 18:01:24 http-nio-8081-exec-10 DEBUG ==>  Preparing: SELECT * FROM sec_menu WHERE DELETED = 0 AND ENABLED=1 AND STANBY_ID1='2' AND ID_ IN ( SELECT MENU_ID from sec_menu_member WHERE USER_ID =? UNION SELECT MENU_ID FROM sec_menu_role WHERE ROLE_ID IN ( SELECT ROLE_ID FROM sec_role_member m LEFT JOIN sec_role r ON m.ROLE_ID = r.ID_ WHERE m.USER_ID =? AND r.STATE=1 ) UNION SELECT o.MENU_ID FROM sec_menu_org o LEFT JOIN sec_user u ON o.ORG_ID = u.ORG_ID LEFT JOIN sec_org so ON so.ID_ = u.ORG_ID WHERE u.ID_ = ? AND so.STATE=1 ) ORDER BY sort 
2019-2-22 18:01:24 http-nio-8081-exec-10 DEBUG ==> Parameters: 1(String), 1(String), 1(String)
2019-2-22 18:01:24 http-nio-8081-exec-10 DEBUG <==      Total: 26
2019-2-22 18:01:24 http-nio-8081-exec-1 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-35' limit 1 
2019-2-22 18:01:24 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-22 18:01:24 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-22 18:01:24 http-nio-8081-exec-2 DEBUG ==>  Preparing: select count(*) from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') 
2019-2-22 18:01:24 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-22 18:01:24 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-22 18:01:24 http-nio-8081-exec-2 DEBUG ==>  Preparing: select sum(sf_money) from cust_sfjl where date_format(create_time,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') and sf_stat = '已收费' 
2019-2-22 18:01:24 http-nio-8081-exec-2 DEBUG ==> Parameters: 
2019-2-22 18:01:24 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-22 18:01:24 http-nio-8081-exec-3 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') = date_format(now(),'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type ='门诊' and b.DELETED = 0 order by a.num desc 
2019-2-22 18:01:24 http-nio-8081-exec-3 DEBUG ==> Parameters: 
2019-2-22 18:01:24 http-nio-8081-exec-3 DEBUG <==      Total: 2
2019-2-22 18:01:24 http-nio-8081-exec-3 DEBUG ==>  Preparing: select b.ORG_NAME,case when a.num is null then 0 else a.num end NUM from sec_org b left join (select yy_clinic,count(*) num from yy_manage where date_format(yy_date,'%Y-%m-%d') >= date_format(?,'%Y-%m-%d') and date_format(?,'%Y-%m-%d') >= date_format(yy_date,'%Y-%m-%d') group by yy_clinic) a on a.yy_clinic = b.ID_ where b.type = '门诊' and b.DELETED = 0 order by a.num desc 
2019-2-22 18:01:24 http-nio-8081-exec-3 DEBUG ==> Parameters: 2019-02-01(String), 2019-02-28(String)
2019-2-22 18:01:24 http-nio-8081-exec-3 DEBUG <==      Total: 2
2019-2-22 18:01:25 http-nio-8081-exec-4 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.* FROM (SELECT a.in_out_id, a.in_out_code, a.in_out_time, a.type, a.creator_id, a.creator, a.num, a.money, a.state, a.clinic_id, b.org_name FROM stock_in_out a, sec_org b WHERE a.clinic_id = b.id_ AND a.type != '领用' AND a.type != '退领') t) b LEFT JOIN stock_audit c ON b.in_out_id = c.in_out_id WHERE c.is_pass IS NULL OR b.state = 0.5 
2019-2-22 18:01:25 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-22 18:01:25 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-22 18:01:25 http-nio-8081-exec-4 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 0.5 then '已发送' when c.is_pass is null then '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id = b.id_ and a.type != '领用' and a.type != '退领' order by a.state,a.in_out_time desc) t ) b left join stock_audit c on b.in_out_id = c.in_out_id where c.is_pass is null or b.state = 0.5 order by b.in_out_time desc,b.state limit ?,? 
2019-2-22 18:01:25 http-nio-8081-exec-4 DEBUG ==> Parameters: 0(Integer), 10(Integer)
2019-2-22 18:01:25 http-nio-8081-exec-4 DEBUG <==      Total: 4
2019-2-22 18:01:27 http-nio-8081-exec-5 DEBUG ==>  Preparing: select * from sec_menu where ID_='062af654-9c05-4112-b8d8-50' limit 1 
2019-2-22 18:01:27 http-nio-8081-exec-5 DEBUG ==> Parameters: 
2019-2-22 18:01:27 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-22 18:01:27 http-nio-8081-exec-6 DEBUG ==>  Preparing: select type_id typeId, code, name, parent_id parentId,case when parent_id = '0' or parent_id = 'CD0001' then true else false end open from stock_product_type order by create_time 
2019-2-22 18:01:27 http-nio-8081-exec-6 DEBUG ==> Parameters: 
2019-2-22 18:01:27 http-nio-8081-exec-6 DEBUG <==      Total: 7
2019-2-22 18:01:27 http-nio-8081-exec-7 DEBUG ==>  Preparing: SELECT count(0) FROM (SELECT t.stock_id, t.clinic_id, t.type_id, t.product_type, t.product_code, t.product_unit, t.product_name, t.product_model, t.product_spec, t.product_brand, t.stock_num, t.stock_num * t.sprice combined, t.end_time, t.sprice, t.money, t.remark, CASE WHEN t.allowance IS NOT NULL THEN t.allowance ELSE 0 END allowance FROM (SELECT stock_id, clinic_id, type_id, product_type, product_code, product_unit, product_name, product_model, product_spec, product_brand, stock_num, end_time, sprice, money, remark, (SELECT sum(allowance) FROM stock_in_out_de WHERE clinic_id = stock.clinic_id AND in_out_code = stock.product_code AND now() > end_time) allowance FROM stock WHERE clinic_id = ? AND stock_num > 0) t) t LEFT JOIN stock_warn b ON b.clinic_id = t.clinic_id AND t.product_code = b.warn_pro_id 
2019-2-22 18:01:27 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String)
2019-2-22 18:01:27 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-22 18:01:27 http-nio-8081-exec-7 DEBUG ==>  Preparing: select t.*,b.warn_num from ( select t.stock_id,t.clinic_id,t.type_id,t.product_type,t.product_code,t.product_unit, t.product_name,t.product_model,t.product_spec,t.product_brand,t.stock_num,t.stock_num*t.sprice combined, t.end_time,t.sprice,t.money,t.remark,case when t.allowance is not null then t.allowance else 0 end allowance from ( select stock_id,clinic_id,type_id,product_type,product_code,product_unit, product_name,product_model,product_spec,product_brand,stock_num, end_time,sprice,money,remark, (select sum(allowance) from stock_in_out_de where clinic_id = stock.clinic_id and in_out_code = stock.product_code and now()>end_time) allowance from stock where clinic_id = ? and stock_num > 0 ) t order by t.product_code ) t left join stock_warn b on b.clinic_id = t.clinic_id and t.product_code = b.warn_pro_id order by product_code limit ?,? 
2019-2-22 18:01:27 http-nio-8081-exec-7 DEBUG ==> Parameters: 122(String), 0(Integer), 10(Integer)
2019-2-22 18:01:27 http-nio-8081-exec-7 DEBUG <==      Total: 10
2019-2-22 18:01:29 http-nio-8081-exec-8 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when b.state = 0.5 then '已发送' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id != ? and(a.type='进货' or a.type='退货') and a.clinic_id = b.id_ order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-22 18:01:29 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-22 18:01:29 http-nio-8081-exec-8 DEBUG <==      Total: 7
2019-2-22 18:01:29 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id != ? and (a.type='进货' or a.type='退货') ) t 
2019-2-22 18:01:29 http-nio-8081-exec-8 DEBUG ==> Parameters: 122(String)
2019-2-22 18:01:29 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-22 18:01:31 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 5 OFFSET 0 
2019-2-22 18:01:31 http-nio-8081-exec-9 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:31 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-22 18:01:31 http-nio-8081-exec-9 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-22 18:01:31 http-nio-8081-exec-9 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:31 http-nio-8081-exec-9 DEBUG <==      Total: 1
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='e8d617f7-b42a-45b1-8b5c-15c8e433bc31' limit 1 
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG ==> Parameters: 
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG <==      Total: 0
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG ==>  Preparing: INSERT INTO stock_audit ( audit_id,in_out_id,user_id,user_name,audit_time,remark,is_pass ) VALUES( ?,?,?,?,?,?,? ) 
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG ==> Parameters: dc43329a-2225-4ead-98c2-0987041a8649(String), e8d617f7-b42a-45b1-8b5c-15c8e433bc31(String), 1(String), admin(String), 2019-02-22 18:01:32.385(Timestamp), (String), 1(Integer)
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG <==    Updates: 1
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG ==>  Preparing: select batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit,sum(inventory_num) inventory_num, sum(money) money from items_temporary where order_id = ? group by batch,code,name,type_id,type,model,specifications,brand,inventory_cost,validity,retail_price,remark,unit 
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG <==      Total: 1
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG ==>  Preparing: select sum(allowance) from stock_in_out_de where clinic_id =? and in_out_code = ? and allowance !=0 and end_time > now() group by in_out_code 
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG ==> Parameters: 122(String), M003469(String)
2019-2-22 18:01:32 http-nio-8081-exec-10 DEBUG <==      Total: 0
2019-2-22 18:01:35 http-nio-8081-exec-1 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='e8d617f7-b42a-45b1-8b5c-15c8e433bc31' limit 1 
2019-2-22 18:01:35 http-nio-8081-exec-1 DEBUG ==> Parameters: 
2019-2-22 18:01:35 http-nio-8081-exec-1 DEBUG <==      Total: 1
2019-2-22 18:01:43 http-nio-8081-exec-2 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 10 OFFSET 0 
2019-2-22 18:01:43 http-nio-8081-exec-2 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:43 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-22 18:01:43 http-nio-8081-exec-2 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-22 18:01:43 http-nio-8081-exec-2 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:43 http-nio-8081-exec-2 DEBUG <==      Total: 1
2019-2-22 18:01:46 http-nio-8081-exec-3 DEBUG ==>  Preparing: select * from ( select code inOutCode,name pName,model pModel,specifications pSpe,brand pBrand,sum(inventory_num) num,batch batchId,unit pUnit,remark, validity endTime,sum(money) money,retail_price price,inventory_cost cost from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity,remark,unit) t LIMIT 5 OFFSET 0 
2019-2-22 18:01:46 http-nio-8081-exec-3 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:46 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-22 18:01:46 http-nio-8081-exec-3 DEBUG ==>  Preparing: select count(*) from ( select code from items_temporary where order_id=? group by code,name,batch,model,brand,specifications,inventory_cost,retail_price,validity ) t 
2019-2-22 18:01:46 http-nio-8081-exec-3 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:46 http-nio-8081-exec-3 DEBUG <==      Total: 1
2019-2-22 18:01:47 http-nio-8081-exec-4 DEBUG ==>  Preparing: select * from stock_audit where in_out_id='e8d617f7-b42a-45b1-8b5c-15c8e433bc31' limit 1 
2019-2-22 18:01:47 http-nio-8081-exec-4 DEBUG ==> Parameters: 
2019-2-22 18:01:47 http-nio-8081-exec-4 DEBUG <==      Total: 1
2019-2-22 18:01:51 http-nio-8081-exec-5 DEBUG ==>  Preparing: select b.in_out_id,b.in_out_code,b.in_out_time,b.type,b.creator_id,b.creator,b.num,b.money,b.clinic_id,b.org_name,c.user_name,c.audit_time,c.remark ,case when b.state = 1 then '已完成' when b.state = 0.5 then '已发送' when c.is_pass is not null and c.is_pass = 1 then '已通过' when c.is_pass is not null and c.is_pass = 0 then '未通过' else '未审核' end state from ( select t.* from ( select a.in_out_id,a.in_out_code,a.in_out_time,a.type,a.creator_id,a.creator,a.num,a.money,a.state,a.clinic_id,b.org_name from stock_in_out a,sec_org b where a.clinic_id != ? and(a.type='进货' or a.type='退货') and a.clinic_id = b.id_ order by a.state,a.in_out_time desc) t LIMIT 10 OFFSET 0 ) b left join stock_audit c on b.in_out_id = c.in_out_id order by b.in_out_time desc,b.state 
2019-2-22 18:01:51 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String)
2019-2-22 18:01:51 http-nio-8081-exec-5 DEBUG <==      Total: 7
2019-2-22 18:01:51 http-nio-8081-exec-5 DEBUG ==>  Preparing: select count(*) from ( select a.in_out_id from stock_in_out a where a.clinic_id != ? and (a.type='进货' or a.type='退货') ) t 
2019-2-22 18:01:51 http-nio-8081-exec-5 DEBUG ==> Parameters: 122(String)
2019-2-22 18:01:51 http-nio-8081-exec-5 DEBUG <==      Total: 1
2019-2-22 18:01:55 http-nio-8081-exec-6 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-22 18:01:55 http-nio-8081-exec-6 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:55 http-nio-8081-exec-6 DEBUG <==      Total: 0
2019-2-22 18:01:55 http-nio-8081-exec-6 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-22 18:01:55 http-nio-8081-exec-6 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:55 http-nio-8081-exec-6 DEBUG <==      Total: 1
2019-2-22 18:01:58 http-nio-8081-exec-7 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-22 18:01:58 http-nio-8081-exec-7 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:58 http-nio-8081-exec-7 DEBUG <==      Total: 0
2019-2-22 18:01:58 http-nio-8081-exec-7 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-22 18:01:58 http-nio-8081-exec-7 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:01:58 http-nio-8081-exec-7 DEBUG <==      Total: 1
2019-2-22 18:02:00 http-nio-8081-exec-8 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-22 18:02:00 http-nio-8081-exec-8 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:02:00 http-nio-8081-exec-8 DEBUG <==      Total: 0
2019-2-22 18:02:00 http-nio-8081-exec-8 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-22 18:02:00 http-nio-8081-exec-8 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:02:00 http-nio-8081-exec-8 DEBUG <==      Total: 1
2019-2-22 18:02:05 http-nio-8081-exec-9 DEBUG ==>  Preparing: select * from ( select in_out_de_id,in_out_code,clinic_id,p_name,type_id,p_type,p_model,p_spe,price,case when num < 0 then -num else num end num,p_brand,p_unit, case when money < 0 then -money else money end money,remark,end_time,user_name,user_id,create_time,batch_id,operation_type,order_id,cost from stock_in_out_de where order_id = ? order by in_out_code) t LIMIT 10 OFFSET 0 
2019-2-22 18:02:05 http-nio-8081-exec-9 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:02:05 http-nio-8081-exec-9 DEBUG <==      Total: 0
2019-2-22 18:02:05 http-nio-8081-exec-9 DEBUG ==>  Preparing: select count(*) from stock_in_out_de where order_id = ? order by in_out_code 
2019-2-22 18:02:05 http-nio-8081-exec-9 DEBUG ==> Parameters: RK000005(String)
2019-2-22 18:02:05 http-nio-8081-exec-9 DEBUG <==      Total: 1
